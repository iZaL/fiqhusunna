<?php
/*********************************************************************************************************
 * Locale Route
 ********************************************************************************************************/
Route::get('locale/{lang}', ['as' => 'locale.select', 'uses' => 'LocaleController@setLocale']);

/*********************************************************************************************************
 * Auth Routes
 ********************************************************************************************************/
Route::controllers([
    'auth'     => 'AuthController',
    'password' => 'PasswordController',
]);

/*********************************************************************************************************
 * User Profile
 ********************************************************************************************************/
Route::get('profile', 'UserController@profile');

/*********************************************************************************************************
 * Sound
 ********************************************************************************************************/
Route::resource('track', 'TrackController');

/*********************************************************************************************************
 * Favorites
 ********************************************************************************************************/
/*********************************************************************************************************
 * Comments
 ********************************************************************************************************/
/*********************************************************************************************************
 * Rating
 ********************************************************************************************************/
/*********************************************************************************************************
 * Categories
 ********************************************************************************************************/
resource('category', 'CategoryController');

/*********************************************************************************************************
 * Album
 ********************************************************************************************************/
resource('album', 'AlbumController');

/*********************************************************************************************************
 *
 ********************************************************************************************************/

/*********************************************************************************************************
 * Dashboard
 ********************************************************************************************************/
Route::get('/', 'HomeController@index');

Route::get('home', 'HomeController@index');

/*********************************************************************************************************
 * Admin Routes
 ********************************************************************************************************/
Route::group(['namespace' => 'Admin', 'prefix' => 'admin', 'middleware' => ['auth']], function () {

    Route::get('/', 'HomeController@index');

    resource('category', 'CategoryController');

    resource('album', 'AlbumController');

    resource('track', 'TrackController');

    get('track/category/create', 'TrackController@createCategoryTrack');

    get('track/album/create', 'TrackController@createAlbumTrack');

    post('track/upload', 'TrackController@uploadTrack');

    resource('photo', 'PhotoController');
});

Route::get('test', function () {

    $trackUploader = App::make('\App\Src\Track\TrackCrawler');

    $trackUploader->syncTracks();

    dd('done');

});